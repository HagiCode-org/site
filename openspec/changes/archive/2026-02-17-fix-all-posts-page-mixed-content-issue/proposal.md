# 修复All Posts页面显示问题

## 概述

优化 Hagicode 文档站点的 All Posts 页面（`/blog/`）显示样式，使其仅显示博客文章标题和元数据，不显示文章摘要内容。

## 问题背景

**状态更新**：经过验证，All Posts 页面已经正确地只显示 `blog/` 目录下的文章，没有混合显示其他文档内容。

**当前问题**：博客列表页面显示时采用"标题+内容摘要"的混排布局，用户希望仅显示标题列表，以提高页面浏览效率和简洁性。

### 技术分析

根据 starlight-blog 插件源码分析，博客列表页面使用 `Preview.astro` 组件渲染每篇文章，包含：
1. **标题** (`<h2>`) - 文章标题链接
2. **封面图** (`Cover`) - 可选的封面图片
3. **元数据** (`Metadata`) - 发布日期、阅读时间等
4. **摘要内容** (`Excerpt`) - 文章摘要或开头内容（这是需要隐藏的部分）
5. **标签** (`PostTags`) - 文章标签

当前配置：
- `starlight-blog` v0.25.2，仅配置了 `rss: false`
- 博客文章位于 `apps/docs/src/content/docs/blog/` 目录
- 部分博客文章在 frontmatter 中设置了 `truncate: true`
- 插件通过 `Excerpt` 组件自动生成或显示摘要内容

## 目标

优化 All Posts 页面显示：
1. **仅显示标题列表**：隐藏文章摘要内容，只保留标题和元数据
2. **保留关键信息**：保持文章标题、发布日期、标签等元数据的正常显示
3. **保持简洁布局**：提供更紧凑的文章列表视图
4. **不影响详情页**：单篇文章详情页的显示不受影响

## 范围

### 包含内容
- 通过 CSS 隐藏博客列表页面的摘要内容
- 验证页面布局和样式显示
- 本地开发测试和生产构建验证

### 排除内容
- 不修改现有博客文章内容和 frontmatter
- 不影响单篇文章详情页面
- 不修改 starlight-blog 插件配置
- 不修改 RSS feed 生成逻辑

## 影响评估

### 用户体验改进
- **提高浏览效率**：简洁的标题列表让用户可以快速浏览所有博客文章
- **减少视觉干扰**：去除摘要内容后，页面更简洁，易于扫描
- **保持信息完整**：标题、日期、标签等关键信息仍然可见

### 技术影响
- **修改范围**：主要涉及 CSS 样式覆盖，在 `starlight-override.css` 中添加规则
- **向后兼容**：不影响现有博客文章内容和单篇文章页面
- **构建兼容**：纯 CSS 修改，不影响构建过程

## 风险和注意事项

1. **CSS 选择器优先级**：需要确保自定义样式优先级足够高，能够覆盖插件默认样式
2. **插件更新兼容**：如果 starlight-blog 插件更新导致 DOM 结构变化，CSS 可能需要相应调整
3. **可访问性**：确保隐藏摘要后，页面仍然保持良好的可访问性

## 验证标准

- [ ] All Posts 页面仅显示文章标题和元数据，不显示摘要内容
- [ ] 文章标题可点击，正常跳转到详情页
- [ ] 保留博客文章的标准元数据（标题、发布日期、标签）
- [ ] 页面布局简洁，无多余空白区域
- [ ] 单篇文章详情页显示正常，不受影响
- [ ] `npm run dev:docs` 本地开发正常
- [ ] `npm run build:docs` 生产构建成功
- [ ] GitHub Actions 部署成功

## 相关文件

- `apps/docs/src/styles/starlight-override.css` - Starlight 样式覆盖文件（主要修改文件）
- `apps/docs/astro.config.mjs` - starlight-blog 插件配置（无需修改）
- `apps/docs/src/content/docs/blog/` - 博客文章目录（无需修改）

## 实施方案

### 方案选择：CSS 样式覆盖

通过在 `starlight-override.css` 中添加 CSS 规则，隐藏博客列表页面中的摘要内容区域。

```css
/* 隐藏博客列表页面的摘要内容 */
.blog-page .preview .sl-markdown-content {
  display: none;
}

/* 调整博客列表项间距，使布局更紧凑 */
.blog-page .preview {
  gap: 1rem;
}
```

### 为什么选择 CSS 方案

1. **最小侵入性**：不需要修改插件代码或覆盖组件
2. **易于维护**：CSS 规则简单明了，易于理解和修改
3. **向后兼容**：不影响插件升级和现有功能
4. **性能优良**：纯 CSS 解决方案，无运行时开销

### 备选方案（如 CSS 方案不可行）

1. **覆盖 Preview.astro 组件**：创建自定义组件覆盖插件默认组件
2. **修改博客文章 frontmatter**：为所有文章设置空摘要或禁用截断

## 时间估算

- CSS 样式添加和测试：约 15 分钟
- 本地验证：约 10 分钟
- 部署验证：约 5 分钟
