# 实施任务清单

本文档列出了优化 All Posts 页面显示的具体实施步骤。

## 阶段 1：现状确认

### 1.1 验证博客文章显示范围
- [ ] 访问 `http://localhost:4321/blog/` 确认只显示 `blog/` 目录下的文章
- [ ] 确认没有混合显示其他文档内容（此问题已解决）

### 1.2 分析当前显示结构
- [ ] 使用浏览器开发者工具检查博客列表页面的 DOM 结构
- [ ] 确认摘要内容区域的 CSS 类名（预期为 `.preview .sl-markdown-content`）
- [ ] 检查页面整体布局和间距

## 阶段 2：CSS 样式实施

### 2.1 添加隐藏摘要的 CSS 规则
- [ ] 编辑 `apps/docs/src/styles/starlight-override.css`
- [ ] 添加以下 CSS 规则：

```css
/* 隐藏博客列表页面中的文章摘要内容 */
.blog-page .preview .sl-markdown-content {
  display: none;
}

/* 可选：调整博客列表项间距，使布局更紧凑 */
.blog-page .preview {
  gap: 0.75rem;
}

/* 可选：调整标题下边距 */
.blog-page .preview h2 {
  margin-bottom: 0.75rem;
}
```

### 2.2 验证 CSS 选择器优先级
- [ ] 确认自定义样式优先级足够高
- [ ] 如需要，添加 `!important` 或更具体的选择器

## 阶段 3：本地测试

### 3.1 开发环境测试
- [ ] 运行 `npm run dev:docs`
- [ ] 访问 `http://localhost:4321/blog/`
- [ ] 验证页面只显示文章标题和元数据，不显示摘要
- [ ] 确认布局简洁美观

### 3.2 功能验证
- [ ] 点击文章标题，确认可以正常跳转到详情页
- [ ] 检查文章元数据显示（日期、标签）正常
- [ ] 验证分页功能正常工作
- [ ] 测试侧边栏的"最近文章"功能

### 3.3 详情页验证
- [ ] 点击任意文章进入详情页
- [ ] 确认单篇文章详情页显示完整内容
- [ ] 验证详情页不受 CSS 修改影响

### 3.4 响应式测试
- [ ] 在不同屏幕尺寸下测试页面显示
- [ ] 验证移动端和桌面端布局正常

## 阶段 4：生产构建

### 4.1 构建验证
- [ ] 运行 `npm run build:docs`
- [ ] 确认构建成功，无错误
- [ ] 检查构建输出

### 4.2 生产构建测试
- [ ] 运行 `npm run preview:docs`
- [ ] 访问 `/blog/` 验证页面显示正确
- [ ] 确认静态资源加载正常

## 阶段 5：部署验证

### 5.1 CI/CD 验证
- [ ] 提交变更到 Git 仓库
- [ ] 等待 GitHub Actions 工作流完成
- [ ] 检查构建日志确认无错误

### 5.2 生产环境验证
- [ ] 访问 `https://docs.hagicode.com/blog/`
- [ ] 验证 All Posts 页面只显示标题和元数据
- [ ] 测试文章详情页访问
- [ ] 确认页面在不同浏览器中显示正常

## 阶段 6：清理和文档

### 6.1 清理工作
- [ ] 确认代码格式符合项目规范
- [ ] 移除任何临时文件或调试代码

### 6.2 更新文档（如需要）
- [ ] 如有重大样式变更，更新相关文档

## 回滚计划

如果样式显示出现问题：
1. 检查 `starlight-override.css` 中的新增 CSS 规则
2. 调整选择器或删除新增规则
3. 重新构建和部署

## 备选方案

如果 CSS 方案无法生效，考虑以下备选方案：

### 方案 A：覆盖 Preview.astro 组件
- [ ] 创建 `apps/docs/src/components/Preview.astro`
- [ ] 复制插件组件代码并移除 Excerpt 部分
- [ ] 重新测试和部署

### 方案 B：修改博客文章 frontmatter
- [ ] 为所有博客文章添加 `excerpt: ''` 或移除 `truncate: true`
- [ ] 重新构建验证

## 完成标准

所有任务完成后：
- All Posts 页面仅显示文章标题和元数据
- 不显示文章摘要内容
- 布局简洁美观
- 详情页显示正常
- 所有测试通过
- 生产环境验证成功
